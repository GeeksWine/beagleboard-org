<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="helma.xsl"?>
<xmlroot xmlns:hop="http://www.helma.org/docs/guide/features/database">
  <hopobject id="2814" name="new" prototype="Page" created="1372444995090" lastModified="1372450359491">
  <hop:parent idref="2471" prototyperef="Page"/>
    <is_xhtml type="boolean">true</is_xhtml>
    <http_remotehost>127.0.0.1</http_remotehost>
    <http_language>en-US,en;q=0.8</http_language>
    <uri>new</uri>
    <http_browser>Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1500.63 Safari/537.36</http_browser>
    <time type="date">28.06.2013 15:12:39 CDT</time>
    <hopsession>127.0.0.192.94.94.1fx4utgy75uek</hopsession>
    <body>&lt;script src=&quot;/static/bonescript-demo.js&quot;&gt;&lt;/script&gt;
&lt;div id=&apos;side-menu&apos; class=&quot;t3_sidebar&quot;&gt;
    &lt;ul class=&quot;left-menu&quot;&gt;&lt;strong&gt;Navigation&lt;/strong&gt;
        &lt;li&gt;&lt;a href=&quot;/static/side-menu.html&quot;&gt;Menu contents&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;t3_content_1&quot;&gt;&lt;div id=&apos;connect-status&apos;&gt;&lt;/div&gt;&lt;div id=&quot;content_child&quot;&gt;
&lt;h1&gt;Demo: Maxbotic Ultrasonic Sensor&lt;/h1&gt;
&lt;p&gt;  The LV-MaxSonar-EZ2 High Performance Sonar Range Finder provides very short
to long-range detection and ranging, in an incredibly small package. The sonar
detects objects from 0-254 inches and provides sonar range information from 6-inches
out to 254-inches with 1-inch resolution.
&lt;/p&gt;
&lt;i&gt;Note: Each time after the Sonar is powered up, it will calibrate
during it&apos;s first read cycle. The sensor uses this stored 
information to range a close object. It is important that objects
not be close to the sensor during this calibration cycle. The
best sensitivity is obtained when it is clear for fourteen 
inches, but good results are common when clear for at least
seven inches. If an object is too close during the calibration
cycle, the sensor may then ignore the objects at that distance.
To calibrate the LV-MAX Sonar, cycle power, then command a read
cycle.&lt;/i&gt;




&lt;h2&gt;Example
 &lt;button class=&quot;dynlink&quot; onclick=&quot;demoRun(&apos;code&apos;)&quot;&gt;run&lt;/button&gt;
 &lt;button class=&quot;dynlink&quot; onclick=&quot;demoRestore(&apos;code&apos;)&quot;&gt;restore&lt;/button&gt;
&lt;/h2&gt;
&lt;pre id=&quot;code&quot; class=&quot;use-editor&quot; style=&quot;height:800px;&quot;&gt;
var b = require(&apos;bonescript&apos;);
var i =0;

/* Check the sensor values every 3 seconds*/
setInterval(read, 5000);

function read(){
b.analogRead(&apos;P9_40&apos;, printStatus);
}
function printStatus(x) {
    console.log(&apos;x.value = &apos; + x.value);
    distance(x.value);
}

/* Theoretical Values
Analog: (Vcc/512) / inch
5V: ~9.8mV / inch
3.3V: ~6.4mV/in */
function distance(i){
    var array = [0.0098,0.0196,0.0294,0.0392,0.049,0.0588,0.0686,
    0.0784, 0.0882, 0.098, 0.107, 0.117];
    var j;
    for(j=0; j&lt;array.length; j++){
     if(array[j] &gt; i){
         break;
      }
    }
    console.log(&quot;There is an object&quot; + j + &quot; inches away.&quot;);
}
&lt;/pre&gt;
&lt;div readonly id=&apos;console-output&apos; style=&quot;height:100px;&quot;&gt;&lt;/div&gt;
&lt;br&gt;&lt;/br&gt;
&lt;img align=&quot;center&quot; width=&quot;90%&quot; src=&quot;http://beagleboard.org/static/uploads/ADC%20Potentiometer_bb.png&quot;/&gt;
&lt;br&gt;&lt;/br&gt;
&lt;h2&gt;Build and execute instructions&lt;/h2&gt;
&lt;ul&gt;
 &lt;li&gt;Hook up a BeagleBone or BeagleBone Black to the breadboard as shown in the diagram (above).&lt;/li&gt;
 &lt;li&gt;After clicking ‘run’, the ADC1 channel will output a reading between 0-1, where 0 is 0V and 1 is 
 the maximum input voltage (1.8V).&lt;/li&gt;
 &lt;li&gt;Adjust your potentiometer&apos;s knob and click run again. The lower the resistance, the higher voltage you will see.&lt;/li&gt;
 &lt;li&gt;Alter the code to look at inputs on other analog input pins. A schematic showing all available ADC channels are listed &lt;a href=&quot;http://circuitco.com/support/index.php?title=Cape_Expansion_Headers#Cape_Expansion_Headers&quot;&gt;here.&lt;/a&gt;&lt;/li&gt;
    
&lt;/ul&gt;

&lt;h2&gt;See also&lt;/h2&gt;
&lt;h3&gt;Related functions&lt;/h3&gt;
&lt;ul&gt;
 &lt;li&gt;&lt;a href=&quot;/Support/BoneScript/#require&quot;&gt;require&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;/Support/BoneScript/analogRead/&quot;&gt;analogRead&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</body>
    <pseudoparent idref="2471" prototyperef="Page"/>
    <http_referer>http://beagleboard.org/support/BoneScript/new/edit</http_referer>
    <http_host>beagleboard.org</http_host>
    <user>cortezjuanjr@gmail.com</user>
    <lang>en-us</lang>
  </hopobject>
</xmlroot>
