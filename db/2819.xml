<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="helma.xsl"?>
<xmlroot xmlns:hop="http://www.helma.org/docs/guide/features/database">
  <hopobject id="2819" name="Ultrasonic_Sensor" prototype="Page" created="1372690591672" lastModified="1372690591708">
  <hop:parent idref="2471" prototyperef="Page"/>
    <is_xhtml type="boolean">true</is_xhtml>
    <http_remotehost>127.0.0.1</http_remotehost>
    <http_language>en-US,en;q=0.8</http_language>
    <uri>Ultrasonic_Sensor</uri>
    <http_browser>Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1500.63 Safari/537.36</http_browser>
    <time type="date">01.07.2013 09:56:31 CDT</time>
    <hopsession>127.0.0.192.94.94.i0lulekbzhm3</hopsession>
    <body>&lt;script src=&quot;/static/bonescript-demo.js&quot;&gt;&lt;/script&gt;
&lt;div id=&apos;side-menu&apos; class=&quot;t3_sidebar&quot;&gt;
    &lt;ul class=&quot;left-menu&quot;&gt;&lt;strong&gt;Navigation&lt;/strong&gt;
        &lt;li&gt;&lt;a href=&quot;/static/side-menu.html&quot;&gt;Menu contents&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;t3_content_1&quot;&gt;&lt;div id=&apos;connect-status&apos;&gt;&lt;/div&gt;&lt;div id=&quot;content_child&quot;&gt;
&lt;h1&gt;Demo: Maxbotic Ultrasonic Sensor&lt;/h1&gt;
&lt;p&gt;  The LV-MaxSonar-EZ2 High Performance Sonar Range Finder provides very short
to long-range detection and ranging, in an incredibly small package. The sonar
detects objects from 0-254 inches and provides sonar range information from 6-inches
out to 254-inches with 1-inch resolution.
&lt;/p&gt;
&lt;i&gt;Note: Each time after the Sonar is powered up, it will calibrate
during it&apos;s first read cycle. The sensor uses this stored 
information to range a close object. It is important that objects
not be close to the sensor during this calibration cycle. The
best sensitivity is obtained when it is clear for fourteen 
inches, but good results are common when clear for at least
seven inches. If an object is too close during the calibration
cycle, the sensor may then ignore the objects at that distance.
To calibrate the LV-MAX Sonar, cycle power, then command a read
cycle.&lt;/i&gt;&lt;br&gt;&lt;br&gt;


&lt;i&gt;The AN pin outputs a voltage with a scaling factor of (V&lt;sub&gt;cc&lt;/sub&gt;/512) per inch.&lt;br&gt;
A supply of 5V yields ~9.8mV/in. and 3.3V yields ~6.4mV/in.&lt;/i&gt;&lt;/p&gt;




&lt;h2&gt;Example
 &lt;button class=&quot;dynlink&quot; onclick=&quot;demoRun(&apos;code&apos;)&quot;&gt;run&lt;/button&gt;
 &lt;button class=&quot;dynlink&quot; onclick=&quot;demoRestore(&apos;code&apos;)&quot;&gt;restore&lt;/button&gt;
&lt;/h2&gt;
&lt;pre id=&quot;code&quot; class=&quot;use-editor&quot; style=&quot;height:470px;&quot;&gt;
var b = require(&apos;bonescript&apos;);
var i =0;

/* Check the sensor values every 2 seconds*/
setInterval(read, 2000);

function read(){
    b.analogRead(&apos;P9_40&apos;, printStatus);
}
function printStatus(x) {
    console.log(&apos;x.value = &apos; + x.value);
    distance(x.value);
}


function distance(i){

/* Makes an 100-number array in multiples of 9.8mV */
var myArray = [];
for(var m=1; m &lt; 100; m++){
    myArray[m]= 0.0098*m;
}

/*Calculates the distance, in inches, measured from the sensor */
for(var j=0; j &lt; myArray.length;j++){
     if(myArray[j] &gt; i){
         break;
      }
}
console.log(&quot;There is an object &quot; + j + &quot; inches away.&quot;);
}
&lt;/pre&gt;
&lt;div readonly id=&apos;console-output&apos; style=&quot;height:100px;&quot;&gt;&lt;/div&gt;
&lt;br&gt;&lt;/br&gt;
&lt;img align=&quot;right&quot; width=&quot;60%&quot; src=&quot;http://beagleboard.org/static/uploads/Maxbotic%20Sensor.png&quot;/&gt;
&lt;br&gt;&lt;/br&gt;
&lt;h2&gt;Build and execute instructions&lt;/h2&gt;
&lt;ul&gt;
 &lt;li&gt;Connect the &quot;GND&quot; pin from the sensor to P9.1 of the BeagleBoard.&lt;/li&gt;
 &lt;li&gt;Connect the &quot;+5&quot; pin from the sensor to P9.3 of the BeagleBoard.&lt;/li&gt;
 &lt;li&gt;Connect the AN pin from the sensor to P9.40 of the BeagleBoard.&lt;/li&gt;
 &lt;li&gt;Click &quot;Run&quot; on the code and it will output the distance, in inches that your
 sensor is detecting every 5 seconds.&lt;/li&gt;
 &lt;li&gt;Move the sensor closer to or away from an object to see the change in distance.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;See also&lt;/h2&gt;
&lt;h3&gt;Related functions&lt;/h3&gt;
&lt;ul&gt;
 &lt;li&gt;&lt;a href=&quot;/Support/BoneScript/#require&quot;&gt;require&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;/Support/BoneScript/analogRead/&quot;&gt;analogRead&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;http://beagleboard.org/Support/BoneScript/#timers&quot;&gt;setInterval&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</body>
    <pseudoparent idref="2471" prototyperef="Page"/>
    <http_referer>http://beagleboard.org/support/BoneScript/Ultrasonic_Sensor/edit</http_referer>
    <http_host>beagleboard.org</http_host>
    <lang>en-us</lang>
    <user>cortezjuanjr@gmail.com</user>
  </hopobject>
</xmlroot>
