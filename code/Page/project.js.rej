***************
*** 35,108 ****
     }
    res.handlers["User"] = User();
  
-   function cleanField(param)
-   {
-      if (param)
- 	   return param.replace("\"","&quot;");
- 	 else
- 	   return "";
-   }
- 
-   this.errmsg = "";
- 
-   this.registrant = cleanField(this.registrant);
-   this.uri = cleanField(this.uri);
-   this.pname = cleanField(this.pname);
-   this.shortdesc = cleanField(this.shortdesc);
-   this.desc = cleanField(this.desc);
-   this.homepage = cleanField(this.homepage);
-   this.rssfeed = cleanField(this.rssfeed);
- 
-   if ("" + this.registrant == "") {
- 	  this.registrant = session.user["name"];
-   }
- 
    if
     (
      req.data["submit"]
     )
     {
- 	  this.registrant = req.data["registrant"];
- 	  this.uri = req.data["uri"];
- 	  this.pname = req.data["pname"];
- 	  this.shortdesc = req.data["shortdesc"];
- 	  this.desc = req.data["desc"];
- 	  this.homepage = req.data["homepage"];
- 	  this.rssfeed = req.data["rssfeed"];
- 	  this.updatetime = new Date();
-     if 
-      (
-        req.data["registrant"] &&
-        req.data["uri"] &&
-        req.data["pname"] &&
-        req.data["shortdesc"] &&
-        req.data["desc"]
-      )
       {
- 	    this.render_skin = "project";
- 	    this.edit_skin = "edit_project";
- 	    if (this.isTransient())
- 	     {
- 	      this.uri = req.data["uri"];
- 	      app.log("Creating '" + this.uri + "'");
- 	      this.pseudoParent.add(this);
- 	     }
- 	    else
- 	     {
- 	      app.log("Replacing '" + this.uri + "' with '" + req.data["uri"] + "'");
- 	      this.uri = req.data["uri"];
- 	     }
- 	    res.redirect(this.href());
- 	    return;
-     }
-     else 
       {
-        if (!req.data["desc"]) this.errmsg = "* Full Description is a required field";
-        if (!req.data["shortdesc"]) this.errmsg = "* Short Description/Summary is a required field";
-        if (!req.data["pname"]) this.errmsg = "* Project Name is a required field";
-        if (!req.data["uri"]) this.errmsg = "* Project Shortname/URI is a required field";
-        if (!req.data["registrant"]) this.errmsg = "* Registrant is a required field";
       }
     }
    res.data.title = this.uri + " - edit_project";
    if (this.edit_skin)
--- 25,67 ----
     }
    res.handlers["User"] = User();
  
    if
     (
      req.data["submit"]
+     && req.data["pname"]
     )
     {
+     this.user = "" + session.user["name"];
+     this.time = new Date();
+     this.body = req.data["body"];
+     this.lang = req.data["lang"];
+     this.ownername = req.data["ownername"];
+     this.owneremail = req.data["owneremail"];
+     this.pname = req.data["pname"];
+     this.shortdesc = req.data["shortdesc"];
+     this.desc = req.data["desc"];
+     this.version = req.data["version"];
+     this.homepage = req.data["homepage"];
+     this.repository = req.data["repository"];
+     this.rssfeed = req.data["rssfeed"];
+     this.downloadlink = req.data["downloadlink"];
+     this.category = req.data["category"];
+     this.platform = req.data["platform"];
+     this.render_skin = "project";
+     this.edit_skin = "edit_project";
+     if (this.isTransient())
       {
+       this.uri = req.data["uri"];
+       app.log("Creating '" + this.uri + "'");
+       this.pseudoParent.add(this);
+      }
+     else
       {
+       app.log("Replacing '" + this.uri + "' with '" + req.data["uri"] + "'");
+       this.uri = req.data["uri"];
       }
+     res.redirect(this.href());
+     return;
     }
    res.data.title = this.uri + " - edit_project";
    if (this.edit_skin)
***************
*** 112,141 ****
    renderSkin("index");
   }
  
- function showProjectInfoTbl_macro (param)
-  {
- 	var str = "";
- 
-     function fixUrl(param)
- 	{
- 		param = "" + param;
- 		if (param.search("http://") == -1 && param.search("https://") == -1) 
- 		  param = "http://" + param;
- 		return param;
- 	}
- 
-     if (""+this.homepage != "")
- 	   str +=  "<tr>\n" +
- 	           "  <td valign=\"top\" class=\"tbl3\" align=\"right\">Homepage</td>\n" +
- 			   "  <td class=\"tbl5\"><a href=\"" + fixUrl(this.homepage) + "\" target=\"_blank\">" + fixUrl(this.homepage) + "</a></td>"+
- 			   "</tr>";
- 
- 	if (""+this.rssfeed != "")
- 	   str +=  "<tr>\n" +
- 	           "  <td valign=\"top\" class=\"tbl3\" align=\"right\">RSS Feed</td>\n" +
- 			   "  <td class=\"tbl5\"><a href=\"" + fixUrl(this.rssfeed) + "\" target=\"_blank\">" + fixUrl(this.rssfeed) + "</a></td>"+
- 			   "</tr>";
- 
- 	return str;
-  }
-  --- 71,73 ----
    renderSkin("index");
   }
  
